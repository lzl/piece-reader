<template name="follow">
  <!-- <div class="hr"></div> -->
  <div class="container">
    <div class="row">
      <nav class="navbar navbar-light">
        <!-- <a class="navbar-brand" href="/">Piece Reader</a> -->
        <ul class="nav navbar-nav">
          <li class="nav-item">
            <div class="nav-link">{{> loginButtons}}</div>
          </li>
          {{#if currentUser}}
          <li class="nav-item">
            <a class="nav-link" href="/">Reader</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="/following">Following</a>
          </li>
          {{/if}}
        </ul>
      </nav>
      <!-- <div class="hr"></div> -->
    </div>

    <div class="row">
      {{> formFollow}}
      <div class="hr"></div>
    </div>

    <div class="row">
      <ul class="list-group">
        {{#if hasList}}
          {{#each lists}}
            <li class="list-group-item">{{owner}}: {{content}}</li>
          {{/each}}
        {{else}}
          <li class="list-group-item">Fetching...</li>
        {{/if}}
      </ul>
    </div>
  </div>

  {{> ribbon}}
</template>

<template name="formFollow">
  <form id="subscribe" class="form-inline">
    <div class="form-group">
      <label class="sr-only" for="url">URL</label>
      <input type="text" class="form-control" id="url" name="url" placeholder="{{URL}}" disabled>
    </div>
    <div class="form-group">
      <label class="sr-only" for="userId">User ID</label>
      <input type="text" class="form-control" id="userId" name="userId" placeholder="{{userId}}" disabled>
    </div>

    {{#if currentUser}}
      {{#if Template.subscriptionsReady}}
        {{#if following}}
          {{#if unfollow}}
            <button type="button" class="btn btn-danger" data-action="unfollow">Unfollow</button>
          {{else}}
            <button type="button" class="btn btn-primary" data-action="following">Following</button>
          {{/if}}
        {{else}}
          <button type="button" class="btn btn-primary" data-action="follow">Follow</button>
        {{/if}}
      {{/if}}
    {{else}}
      <button type="button" class="btn btn-primary" disabled>Please sign in â†–</button>
    {{/if}}
  </form>
</template>
